{% extends 'base.html' %}
{% block head %}
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel="shortcut icon" type="image/icon" href="{{ url_for('static', filename='img/favicon.png') }}" />
{% endblock %}

{% block body %}
	<section class="main-content">
		<div class="container">
			<h1 style="text-align: center;">BISCOTTIH?!?</h1>
			<h5 style="text-align: center; margin: 0;">Classifica completa generale con tutti i raccoglitori di biscotti di sempre!</h5> 
            <p style="text-align: center; color: gray; margin: 0;">Per tornare alla classifica di sessione, <a href="/index">clicca qui!</a></p>
			<p style="text-align: center; color: gray; margin: 0;">Per vedere la classifica dei gruppi, <a href="/group">clicca qui!</a></p>
			</h5>
			<br>
			<br>
			<div class="row podium">	<!-- For mobile devices -->
				{% if number >= 1: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--first">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[0]["tot_qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[0]["propic"] != 0 %}
								<img src="../static/img/{{users[0]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[0]['name']}}</h5>
								<p class="text-muted mb-0">{{users[0]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
				{% if number >= 2: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--second">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[1]["qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[1]["propic"] != 0 %}
								<img src="../static/img/{{users[1]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[1]['name']}}</h5>
								<p class="text-muted mb-0">{{users[1]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
				{% if number >= 3: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--third">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[2]["tot_qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[2]["propic"]!= 0 %}
								<img src="../static/img/{{users[2]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[2]['name']}}</h5>
								<p class="text-muted mb-0">{{users[2]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
			</div>

			<div class="row">
				{% if number >= 2: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--second">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[1]["tot_qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[1]["propic"] != 0 %}
								<img src="../static/img/{{users[1]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[1]['name']}}</h5>
								<p class="text-muted mb-0">{{users[1]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
				{% if number >= 1: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--first">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[0]["tot_qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[0]["propic"] != 0 %}
								<img src="../static/img/{{users[0]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[0]['name']}}</h5>
								<p class="text-muted mb-0">{{users[0]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
				{% if number >= 3: %}
				<div class="col-sm-4">
					<div class="leaderboard-card leaderboard-card--third">
						<div class="leaderboard-card__top">
							<h3 class="text-center">🍪 {{users[2]["tot_qta"]}}</h3>
						</div>
						<div class="leaderboard-card__body">
							<div class="text-center">
								{% if users[2]["propic"]!= 0 %}
								<img src="../static/img/{{users[2]['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<h5 class="mb-0">{{users[2]['name']}}</h5>
								<p class="text-muted mb-0">{{users[2]['username']}}</p>
								<hr>
							</div>
						</div>
					</div>
				</div>
				{%endif%}
			</div>
			<h4 style="margin-top: 20px;">Classifica completa:</h4>
			<table class="table">
				<thead>
					<tr>
						<th>Utente</th>
						<th>Biscotti ottenuti</th>
						<th>Sessioni vinte</th>
					</tr>
				</thead>
				<tbody>
					{% for element in users: %}
					<tr>
						<td>
							<div class="d-flex align-items-center">
								{% if element["propic"]!= 0 %}
								<img src="../static/img/{{element['_id']}}.png" class="circle-img mb-2" alt="User Img">
								{% else %}
								<img src="../static/img/default.png" class="circle-img mb-2" alt="User Img">
								{%endif%}
								<div class="user-info__basic">
									<h5 class="mb-0">{{element["name"]}}</h5>
									<p class="text-muted mb-0">{{element["username"]}}</p>
								</div>
							</div>
						</td>
						<td>
							<div class="d-flex align-items-center">
								<h4 class="mr-1">{{element["tot_qta"]}}</h4>
							</div>
						</td>
						<td>
							<div class="d-flex align-items-center">
								<h4 class="mr-1">{{element['session_count']}}</h4>
							</div>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</section>
	<footer style="text-align: center; color: gray;">
		<p>Classifica generata da <a href="https://t.me/TakeTheCookieBot">@TakeTheCookieBot</a> su telegram, segui <a
				href="https://t.me/TakeTheCookie">TakeTheCookie</a>!</p>
	</footer>
{% endblock %}